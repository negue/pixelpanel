{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../App.svelte"
  ],
  "sourcesContent": [
    "<script lang=\"ts\">var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { _range } from \"./_range\";\nimport { Options } from \"./options\";\nimport { Twitch } from './twitch';\nimport { PixelState } from \"./pixel.state\";\nimport { CommandHandler } from \"./command-handler\";\nimport { stringToObject, getRandomRgb } from \"./utils\";\nconst options = new Options();\nconst cellDirection = options.getDirection();\nconst cellSize = options.getCellSize();\nconst cellGap = options.getCellGap();\nconst shadow = options.getShadow();\nconst delayAmount = options.getAnimationDelay(); // in ms\nconst ignoredUsers = options.getIgnoredUsers();\nconst twitch = new Twitch(options.getChannel());\nconst pixelz = new PixelState(options.getCells());\nconst commandHandler = new CommandHandler(pixelz);\ntwitch.commandReceived$.subscribe(command => {\n    if (!command) {\n        return;\n    }\n    if (command.username && ignoredUsers.includes(command.username)) {\n        return;\n    }\n    commandHandler.handle(command);\n});\nconst cellValues$ = pixelz.pixelStore$;\n//  value\nlet maxCells = options.getCells();\nlet currentCell = 0; // to add\nfunction increaseByThen() {\n    maxCells += 10;\n}\n// Key = Index, Value any color\nfunction fillRandomColors() {\n    cellValues$.update(value => {\n        for (let i = 0; i < maxCells; i++) {\n            value[i] = getRandomRgb();\n        }\n        return value; // todo refactor\n    });\n}\n// TODO clean up\nfunction moveColorsByOne() {\n    // 0 to 1\n    // 1 to 2\n    cellValues$.update(value => {\n        for (let i = maxCells; i >= 0; i--) {\n            value[i + 1] = value[i];\n        }\n        return value; // todo refactor\n    });\n}\nfunction fillNewCellWithColor() {\n    moveColorsByOne();\n    cellValues$.update(value => {\n        value[0] = getRandomRgb();\n        return value; // todo refactor\n    });\n}\nfunction sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\nfunction rainbow() {\n    return __awaiter(this, void 0, void 0, function* () {\n        for (let i = 0; i < maxCells; i++) {\n            fillNewCellWithColor();\n            yield sleep(50);\n        }\n    });\n}\nfunction toLower(str) {\n    return str.toLowerCase();\n}\nlet cellValues = {};\nconst unsubscribe = cellValues$.subscribe(value => {\n    if (!value) {\n        return;\n    }\n    const newValues = stringToObject(value);\n    cellValues = newValues;\n});\nfunction _initAll() {\n    return __awaiter(this, void 0, void 0, function* () {\n        yield pixelz.init();\n        // console.warn('ADD RANDOM');\n        // pixelz.addPixel('pixel:add=random');\n    });\n}\n_initAll();\n</script>\n\n<main>\n <!--\n  <button on:click={fillNewCellWithColor}>\n    New Color\n  </button>\n\n  <button on:click={rainbow}>\n    Fill Random after a time\n  </button>\n\n  <button on:click={increaseByThen}>\n    Add 10 Cells\n  </button>\n\n  <button on:click={fillRandomColors}>\n    Fill randomv\n  </button>\n\n  { maxCells }\n-->\n  <div class=\"cell-holder {cellDirection}\"\n       style=\"--cell-size: {cellSize}; --cell-gap: {cellGap}\"\n  >\n\n    {#each _range(0, maxCells, 1) as i}\n      <div style=\"background: {(cellValues[i] && cellValues[i].color) || 'inherited'}; --animate-delay: {i*delayAmount}ms;\"\n           data-index=\"{i}\"\n           class=\"cell {(cellValues[i] && cellValues[i].color)} {shadow && 'shadow'}\">\n        {#if (cellValues[i] && cellValues[i].emote != null)}\n          {#if cellValues[i].cheer}\n            <img src=\"https://d3aqoihi2n8ty8.cloudfront.net/actions/{toLower(cellValues[i].emote)}/dark/animated/1/2.gif\"\n                 alt=\"an emote, no name available sorry\">\n          {:else}\n            <img src=\"https://static-cdn.jtvnw.net/emoticons/v1/{cellValues[i].emote}/2.0\"\n                 alt=\"an emote, no name available sorry\">\n          {/if}\n        {/if}\n      </div>\n    {/each}\n\n  </div>\n</main>\n\n<style lang=\"scss\">.row {\n  flex-direction: row; }\n\n.column {\n  flex-direction: column; }\n\n.cell-holder {\n  display: flex;\n  flex-wrap: wrap;\n  min-height: 450px;\n  width: 90%;\n  max-height: 85vh;\n  align-content: flex-start; }\n\n.cell {\n  background: gray;\n  width: var(--cell-size, 40px);\n  height: var(--cell-size, 40px);\n  margin-right: var(--cell-gap, 5px);\n  margin-bottom: var(--cell-gap, 5px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 1s, background-color 2s; }\n  .cell img {\n    width: calc(var(--cell-size) - 5px);\n    height: calc(var(--cell-size) - 5px);\n    object-fit: contain; }\n\n.cell.shadow {\n  box-shadow: 1px 1px 2px 1px rgba(0, 0, 0, 0.45); }\n\n.random {\n  background-image: -webkit-linear-gradient(92deg, #f35626, #feab3a);\n  animation: hue 4s infinite linear;\n  animation-delay: var(--animate-delay); }\n\n@-webkit-keyframes hue {\n  from {\n    -webkit-filter: hue-rotate(0deg); }\n  to {\n    -webkit-filter: hue-rotate(360deg); } }\n\n/*# sourceMappingURL=App.svelte.css.map */</style>\n"
  ],
  "names": [],
  "mappings": "AA+ImB,IAAI,8BAAC,CAAC,AACvB,cAAc,CAAE,GAAG,AAAE,CAAC,AAExB,OAAO,8BAAC,CAAC,AACP,cAAc,CAAE,MAAM,AAAE,CAAC,AAE3B,YAAY,8BAAC,CAAC,AACZ,OAAO,CAAE,IAAI,CACb,SAAS,CAAE,IAAI,CACf,UAAU,CAAE,KAAK,CACjB,KAAK,CAAE,GAAG,CACV,UAAU,CAAE,IAAI,CAChB,aAAa,CAAE,UAAU,AAAE,CAAC,AAE9B,KAAK,8BAAC,CAAC,AACL,UAAU,CAAE,IAAI,CAChB,KAAK,CAAE,IAAI,WAAW,CAAC,KAAK,CAAC,CAC7B,MAAM,CAAE,IAAI,WAAW,CAAC,KAAK,CAAC,CAC9B,YAAY,CAAE,IAAI,UAAU,CAAC,IAAI,CAAC,CAClC,aAAa,CAAE,IAAI,UAAU,CAAC,IAAI,CAAC,CACnC,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,UAAU,CAAE,GAAG,CAAC,EAAE,CAAC,CAAC,gBAAgB,CAAC,EAAE,AAAE,CAAC,AAC1C,oBAAK,CAAC,GAAG,eAAC,CAAC,AACT,KAAK,CAAE,KAAK,IAAI,WAAW,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CACnC,MAAM,CAAE,KAAK,IAAI,WAAW,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CACpC,UAAU,CAAE,OAAO,AAAE,CAAC,AAE1B,KAAK,OAAO,8BAAC,CAAC,AACZ,UAAU,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,AAAE,CAAC,AAEpD,OAAO,8BAAC,CAAC,AACP,gBAAgB,CAAE,wBAAwB,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAClE,SAAS,CAAE,kBAAG,CAAC,EAAE,CAAC,QAAQ,CAAC,MAAM,CACjC,eAAe,CAAE,IAAI,eAAe,CAAC,AAAE,CAAC,AAE1C,mBAAmB,kBAAI,CAAC,AACtB,IAAI,AAAC,CAAC,AACJ,cAAc,CAAE,WAAW,IAAI,CAAC,AAAE,CAAC,AACrC,EAAE,AAAC,CAAC,AACF,cAAc,CAAE,WAAW,MAAM,CAAC,AAAE,CAAC,AAAC,CAAC"
}